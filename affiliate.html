<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>玩家首页</title>
		<link rel="stylesheet" href="static/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="static/layer/theme/default/layer.css">
		<link rel="stylesheet" href="static/custom.css">
		<style type="text/css"></style>
	</head>
	<body style="overflow:scroll;">
		<nav id="topNavBar" class="navbar navbar-default navbar-light fixed-top box-shadow--6dp" style="padding:3px; background-image: linear-gradient(0deg, #dadada 0%, #f1f1f1 50%,#ffffff 100%);">
			<div class="container-fluid">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">游戏推广</a>
					<span>
						推广积分：<span class="h6 text-danger" id="affiPoint">0</span>
						&nbsp;分
					
					</span>
					<button id="btnExchange" class="btn btn-warning px-3 mx-3" type="button">兑换</button>
				</div>
				<div class="nav navbar-nav navbar-right">
					<table>
						<tbody>
							<tr>
								<td style="padding-right:20px">
									<div>
										<span>
											返利余额：<span class="h6 text-success" id="affiMoney">0</span>
											&nbsp;元
										
										</span>
									</div>
								</td>
								<td>
									<button id="btnWithdraw" class="btn btn-success px-3" type="button">提现</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</nav>
		<div class="container-fluid" style="padding-top:55px">
			<table class="table  table-bordered align-middle">
				<tbody>
					<tr>
						<td style="width:100px;text-align:right">邀请码：</td>
						<td>
							<span id="affiId" class="text-danger"></span>
							&nbsp;（返利比例：<span id="affiPercent" class="text-success">10</span>
							&nbsp;%）				
						</td>
					</tr>
					<tr>
						<td style="text-align:right">邀请链接：</td>
						<td>
							<span id="shareURL"></span>
</br>
<a id="btnCopyURL" class="btn btn-secondary px-2">复制链接</a>
<a id="btnShareURL" class="btn btn-danger px-2 mx-1">分享链接</a>
<a id="btnShareQR" class="btn btn-danger px-2">分享二维码</a>
<a id="btnDisplayQR" class="btn btn-success px-2 mx-1">面对面扫码</a>
</td></tr>
<tr>
	<td class=" align-top" style="text-align:right">推广说明：</td>
	<td>
		<ul class="list-group">
			<li class="list-group-item">
				推广方法：<br/>
				<ul>
					<li>
						方法1：直接点击屏幕右上方的“<span class="text-success">分享</span>
						”按钮发送您的专属安装包给对方。
					</li>
					<li>
						方法2：选择并复制您的专属邀请链接发送给对方进行安装包下载。
					</li>
					<li>
						方法3：点击邀请链接下方的“<span class="text-danger">分享链接</span>
						”或“<span class="text-danger">分享二维码</span>
						”将邀请链接或二维码分享出去。
					</li>
					<li>方法4：点击邀请链接下方的“<span class="text-danger">面对面扫码</span>”展示您的专属邀请二维码给对方扫码下载。</li>
				</ul>
				TA安装游戏后，即可以完成绑定关系，绑定关系永久有效，绑定成功后，你将获得积分奖励和相应返利。<br/>
				<span class="text-primary">提示：所有通过以上方法生成或者下载的安装包都是您的专属安装包，安装包已内置您的邀请码，因此您可以通过任何方式将安装包分享出去，所有安装该安装包的用户都将计算为您的推广成果。</span>
			</li>
			<li class="list-group-item">
				积分奖励规则：<br/>
				<ul>
					<li>TA下载并完成游戏安装，您将增加推广积分<span class="text-danger">1</span>分。</li>
					<li>TA下载完资源包并进入游戏，您将增加推广积分<span class="text-danger">5</span>分。</li>
					<li>TA进行首次充值后，您将增加推广积分<span class="text-danger">100</span>分。</li>
					<li>您获得的积分，可用于兑换游戏次数或游戏物品。</li>
					<li>积分不可以提现，不可以兑换现金。</li>
				</ul>
			</li>
			<li class="list-group-item">
				返利规则：<br />
				<ul>
					<li>TA在任何时间充值，您将获得<span class="text-danger">相应返利比例</span>的返利。</li>
					<li>返利余额有多种提现方式，包括直接提现到您的<span class="text-danger">微信或支付宝</span>、兑换为<span class="text-danger">电话充值卡</span>、兑换为游戏点数等。</li>
					<li>佣金大于<span class="text-danger">1</span>元，即可提现。</li>
				</ul>
			</li>
		</ul>
	</td>
</tr>
</tbody></table></div><script src="static/jquery/jquery.min.js"></script>
<script src="static/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="static/layer/layer.js"></script>
<script>

	$(document).ready(function() {

		function refreshData() {
			var app = window.app;
			if (!app)
				return;
			var ret = app.remoteCall(1005,'' + app.getParentChannelId());
			if (!ret){
				layer.msg("获取推广数据失败");
				return;
			}
			var retObj = JSON.parse(ret);
			if (!(retObj.result > 0)){
				layer.msg("获取推广数据失败");
				return;
			}
			$("#affiPoint").text(retObj.point);
			$("#affiMoney").text(retObj.cash);
			$("#shareURL").text(retObj.shareURL);
			$("#affiId").text(retObj.affiliateId);
			$("#affiPercent").text(retObj.percent);
		}
		refreshData();
		$("#shareURL").click(function(){
			var app = window.app;
			if (!app)
				return;
			app.copyToClip($("#shareURL").text());
			layer.msg("链接已复制");
		});
		$("#btnShareURL").click(function(){
			var app = window.app;
			if (!app)
				return;
			app.shareText($("#shareURL").text());
		});
		$("#btnCopyURL").click(function(){
			var app = window.app;
			if (!app)
				return;
			app.copyToClip($("#shareURL").text());
			layer.msg("链接已复制");
		});
		$("#btnDisplayQR").click(function(){
			var app = window.app;
			if (!app)
				return;
			var img = app.encodeToQR($("#shareURL").text(),350,350);
			layer.open({
				title:'邀请二维码',
				maxmin: true,
				content:'<div class="row justify-content-center"><img style="width:200px;height:200px" src="'+img+'"></img></div>',
				btn:[]
			}); 
		});
		$("#btnShareQR").click(function(){
			var app = window.app;
			if (!app)
				return;
			app.shareTextQR($("#shareURL").text());
		});
	});
</script>
</body></html>
